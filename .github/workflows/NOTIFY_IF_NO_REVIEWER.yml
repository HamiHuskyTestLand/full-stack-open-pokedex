name: Notify if No Reviewer Assigned

on:
  pull_request:
    types: [opened, ready_for_review]

jobs:
  check-reviewers:
    runs-on: ubuntu-latest
    steps:
      - name: Check if PR has reviewers
        id: check
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const { data: pr } = await github.rest.pulls.get({
              owner: context.repo.owner,
              repo: context.repo.repo,
              pull_number: context.issue.number
            });
            
            const humanReviewers = pr.requested_reviewers.filter(reviewer => 
              reviewer.type !== 'Bot' && 
              reviewer.login.toLowerCase() !== 'copilot'
            );
            
            const hasHumanReviewers = humanReviewers.length > 0;
            
            console.log(`PR has human reviewers: ${hasHumanReviewers}`);
            console.log(`All requested reviewers: ${pr.requested_reviewers.map(r => r.login).join(', ')}`);
            console.log(`Human reviewers only: ${humanReviewers.map(r => r.login).join(', ')}`);
            
            core.setOutput('has_reviewers', hasHumanReviewers);

      - name: Comment on PR to notify designated person
        if: steps.check.outputs.has_reviewers == 'false'
        uses: peter-evans/create-or-update-comment@v4
        with:
          issue-number: ${{ github.event.pull_request.number }}
          body: |
            @kreuz123 Please request a reviewer for this PR. 
